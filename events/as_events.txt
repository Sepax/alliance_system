namespace = as

# Initialisation
country_event = {
	id = as.1
	title = as.1.t
	desc = as.1.d
	picture = RELIGION_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	hidden = yes
	mean_time_to_happen = {
		days = 1
	}
	trigger = {
		always = yes
	}
    immediate = {
        as_config = {
            # Base alliance points each player receives
            base_points = 15

            # HRE Emperor cost addition (before 1470)
            hre_emperor_cost = 2

            # Point cost per power rating
            great_power_cost = 8
            major_power_cost = 6
            prominent_power_cost = 4
            notable_power_cost = 3
            minor_power_cost = 2
            puny_power_cost = 1

            # Each power status is a percentage of the top rating in the world
            # If a country is above this percentage, they are considered have that power status
            great_power_percentage = 0.9
            major_power_percentage = 0.7
            prominent_power_percentage = 0.5
            notable_power_percentage = 0.3
            minor_power_percentage = 0.1
            puny_power_percentage = 0
        }
        country_event = {
            id = as.2
        }
    }
	option = {
		name = as.1.a
        every_country = {
            country_event = {
                id = as.4
            }
        }
	}
}

# Global Clock (for updating ratings & costs)

country_event = {
    id = as.2
    title = as.2.t
    desc = as.2.d
    picture = RELIGION_eventPicture
    hidden = yes
    mean_time_to_happen = {
        days = 1
    }
    trigger = {
        NOT = {
			1269 = {
				has_province_modifier = as_global_timer
			}
		}
    }
    option = {
        name = as.2.a
        1269 = {
			add_province_modifier = {
				name = as_global_timer
				duration = 30
			}
		}

        if = {
            limit = {
                NOT = {
                    has_global_flag = clock_active
                }
            }
            random_country = {
                country_event = {
                    id = as.3
                }  
            }
        }
    }
}

# Actual event that updates ratings & costs (triggered by global clock)
country_event = {
    id = as.3
    title = as.3.t
    desc = as.3.d
    picture = RELIGION_eventPicture
    is_triggered_only = yes
    hidden = yes
    mean_time_to_happen = {
        days = 1
    }
    trigger = {
        always = yes
    }
    immediate = {
        set_global_flag = clock_active
    }
    option = {
        name = as.3.a
        update_ratings = yes
        update_point_costs = yes
        clr_global_flag = clock_active
    }
}

# Country Clock (for checking alliances)
country_event = {
    id = as.4
    title = as.4.t
    desc = as.4.d
    picture = RELIGION_eventPicture
    hidden = yes
    mean_time_to_happen = {
        days = 1
    }
    trigger = {
        is_player = yes
        NOT = {
			has_country_modifier = as_country_timer
		}
    }
    option = {
        name = as.4.a
        add_country_modifier = {
            name = as_country_timer
            duration = 5
        }

        update_treaties = yes
    }
}

# Breaking Rules
country_event = {
    id = as.5
    title = as.5.t
    desc = as.5.d
    picture = RULEBREAK_eventPicture
    is_triggered_only = yes
    major = yes
    mean_time_to_happen = {
        days = 1
    }
    trigger = {
        is_player = yes
        has_country_flag = breaking_rules
    }
    option = {
        name = as.5.a
        trigger = {
            NOT = {
                has_country_flag = rechecked_treaties
            }
        }
        set_country_flag = rechecked_treaties
    }
    option = {
        name = as.5.b
        trigger = {
            has_country_flag = rechecked_treaties
        }

    }
}

